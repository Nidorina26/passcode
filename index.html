<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Keypad Unlock Demo</title>
  <style>
    :root{--bg:#d0d0d0;--card:#f5f5f5;--accent:#444}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, sans-serif}
    .screen{background:var(--bg);height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}
    .panel{width:360px;max-width:90%;display:flex;flex-direction:column;gap:18px;align-items:center}
    .display{width:100%;height:56px;border-radius:10px;background:rgba(255,255,255,0.1);display:flex;align-items:center;justify-content:center;font-size:22px;color:var(--accent);letter-spacing:6px}
    .keypad{width:100%;display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .key{height:64px;border-radius:10px;background:var(--card);display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer}
    .key:active{transform:translateY(1px)}
    .option-panel{display:flex;flex-direction:column;gap:12px;width:100%}
    .option{padding:14px;border-radius:10px;background:var(--card);text-align:center;cursor:pointer}
    .hidden{display:none}
    .reveal{font-family:monospace;background:rgba(255,255,255,0.08);padding:18px;border-radius:8px;white-space:pre-wrap;word-wrap:break-word;color:var(--accent)}
  </style>
</head>
<body>
  <div class="screen">
    <div class="panel" id="panel">
      <div class="display" id="display">----</div>

      <div class="keypad" id="keypad">
        <div class="key">1</div><div class="key">2</div><div class="key">3</div>
        <div class="key">4</div><div class="key">5</div><div class="key">6</div>
        <div class="key">7</div><div class="key">8</div><div class="key">9</div>
        <div class="key" id="del">⌫</div><div class="key">0</div><div class="key" id="enter">⏎</div>
      </div>

      <div class="option-panel hidden" id="options">
        <div class="option" data-ms="900000">Open for 15 minutes</div>
        <div class="option" data-ms="3600000">Open for 1 hour</div>
        <div class="option" data-ms="86400000">Open for the day</div>
      </div>

      <div class="hidden" id="revealArea">
        <div class="reveal" id="revealText"></div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const display = document.getElementById('display');
      const keypad = document.getElementById('keypad');
      const del = document.getElementById('del');
      const enter = document.getElementById('enter');
      const options = document.getElementById('options');
      const revealArea = document.getElementById('revealArea');
      const revealText = document.getElementById('revealText');

      let code = '';
      const MAX = 4;

      function renderDisplay(){
        if(code.length === 0) display.textContent = '----';
        else display.textContent = code.padEnd(4,'•');
      }

      keypad.addEventListener('click', e => {
        const key = e.target.closest('.key');
        if(!key) return;
        if(key.id === 'del') return handleDelete();
        if(key.id === 'enter') return handleEnter();
        const val = key.textContent.trim();
        if(/^[0-9]$/.test(val) && code.length < MAX){
          code += val; renderDisplay();
        }
      });

      function handleDelete(){
        code = code.slice(0,-1);
        renderDisplay();
      }

      function handleEnter(){
        if(code.length !== MAX) return;
        options.classList.remove('hidden');
        keypad.classList.add('hidden');
      }

      options.addEventListener('click', e => {
        const opt = e.target.closest('.option');
        if(!opt) return;
        options.classList.add('hidden');
        revealArea.classList.add('hidden');

        setTimeout(()=>{
          revealText.textContent = 'Entered 4-digit code: ' + code;
          revealArea.classList.remove('hidden');
        },60000); // 60 seconds delay
      });

      window.addEventListener('keydown', e => {
        if(e.key === 'Backspace') return handleDelete();
        if(e.key === 'Enter') return handleEnter();
        if(/^[0-9]$/.test(e.key) && code.length < MAX){
          code += e.key; renderDisplay();
        }
      });

      renderDisplay();
    })();
  </script>
</body>
</html>
